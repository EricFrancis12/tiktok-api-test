<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Token</title>
</head>

<body>
    <div>
        <%= JSON.stringify(locals.auth || {}, null, 4) %>
    </div>
    <div>
        <button onclick="getBrands()">Get Brands</button>
        <br>
        <br>
        <label for="account_id">
            <input id="account_id" type="text">
        </label>
        <br>
        <button onclick="postData()">Post Data</button>
        <br>
        <br>
    </div>

    <script>
        const localRoot = '<%= locals.localRoot || `http://localhost:3000` %>';

        async function getBrands() {
            if (!localRoot) return null;

            const endpoint = `${localRoot}/brands`;
            const res = await fetch(endpoint);
            const resJSON = await res.json();
            console.log(resJSON);

            // ...
        }

        async function postData() {
            if (!localRoot) return null;

            const account_id = document.querySelector('input#account_id').value;
            const endpoint = `${localRoot}/upload/init`;
            const res = await fetch(endpoint, {
                headers: {
                    'Content-Type': 'application/json'
                },
                method: 'POST',
                body: JSON.stringify({
                    account_id,
                    auth: '<%= JSON.stringify(locals.auth || {}) || `` %>'
                })
            });
            const resJSON = await res.json();
            console.log(resJSON);
        }
    </script>
</body>

</html>